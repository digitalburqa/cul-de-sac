<!doctype html>
<html>
<head>
    <title>cul-de-sac</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"> </script>
    <script>
        function search_kw(){
                gapi.client.setApiKey($('#apikey').val());
                gapi.client.load('youtube', 'v3', function() {
                    query_ytube();
                });
        }
        function query_ytube() {
            var q = $('#query').val();
            var request = gapi.client.youtube.search.list({
                   q: q,
                part: 'snippet'                        
            });
            // https://developers.google.com/youtube/v3/docs/search/list#response
            request.execute(function(response) {
                console.log(response.result);
                var items = response.result['items'];
                // https://developers.google.com/youtube/v3/docs/search#resource
                var first_video_id = items[0]['id']['videoId'];
                $('#search-results').html(
                    '</br></br>' +
                    '<iframe width="560" height="315"' +
                        'src="//www.youtube.com/embed/' + first_video_id +
                        '" frameborder="0" allowfullscreen>' +
                    '</iframe>'
                );
            });
        }
    </script>
</head>
<body style="background:white;color:purple;">
    <div id="buttons">
        <label>api key</label>
        <input id="apikey" type="text"/>
        </br></br>
        <label>search</label>
        <input id="query" type="text"/>
        <button id="search-btn" onclick="search_kw()">
            search
        </button>
    </div>
    <div id="search-results">
    </div>
</body>
</html>
